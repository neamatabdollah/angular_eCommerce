@if (product) {
  <div class="product-details-container">
    <div class="product-images">
      <p-galleria
        [value]="product.images"
        [responsiveOptions]="responsiveOptions"
        [numVisible]="4"
        [circular]="true"
      >
        <ng-template pTemplate="item" let-item>
          <img [src]="item" [alt]="product.title" class="gallery-image" />
        </ng-template>
        <ng-template pTemplate="thumbnail" let-item>
          <img [src]="item" [alt]="product.title" class="gallery-thumbnail" />
        </ng-template>
      </p-galleria>
    </div>

    <div class="product-info">
      <h1>{{ product.title }}</h1>
      <p class="brand">{{ product.brand }}</p>
      <p class="category">Category: {{ product.category }}</p>

      <div class="rating">
        <p-rating [ngModel]="product.rating" [readonly]="true"> </p-rating>
        <span>({{ product.rating }})</span>
      </div>

      <div class="price">{{ product.price | currencyEgp }}</div>

      <div
        class="stock-status"
        [ngClass]="{
          'in-stock': product.stock > 0,
          'out-of-stock': product.stock === 0
        }"
      >
        {{ product.stock > 0 ? "In Stock" : "Out of Stock" }}
      </div>

      <p class="description">{{ product.description }}</p>

      <div class="actions">
        <p-inputNumber
          [(ngModel)]="quantity"
          [min]="1"
          [max]="product.stock"
          [disabled]="product.stock === 0"
        >
        </p-inputNumber>

        <p-button
          label="Add to Cart"
          icon="pi pi-shopping-cart"
          [disabled]="product.stock === 0"
          (click)="addToCart()"
          styleClass="ml-2"
        >
        </p-button>
      </div>
    </div>
  </div>
}

@if (loading) {
  <p-progressSpinner></p-progressSpinner>
}
